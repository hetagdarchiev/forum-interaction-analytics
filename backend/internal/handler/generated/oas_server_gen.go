// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	AuthHandler
	ThreadsHandler
	UserHandler
}

// AuthHandler handles operations described by OpenAPI v3 specification.
//
// x-ogen-operation-group: Auth
type AuthHandler interface {
	// AuthLogin implements authLogin operation.
	//
	// Create access and refresh JWT tokens, send to user. The refresh token also stored in a cookie.
	//
	// POST /api/auth/login
	AuthLogin(ctx context.Context, req *AuthLoginRequest) (*JwtToken, error)
	// AuthLogout implements authLogout operation.
	//
	// User logout.
	//
	// POST /api/auth/logout
	AuthLogout(ctx context.Context) error
	// AuthRefresh implements authRefresh operation.
	//
	// Update access and refresh tokens, send to user. The refresh token also stored in a cookie.
	//
	// POST /api/auth/refresh
	AuthRefresh(ctx context.Context) (AuthRefreshRes, error)
}

// ThreadsHandler handles operations described by OpenAPI v3 specification.
//
// x-ogen-operation-group: Threads
type ThreadsHandler interface {
	// ThreadAddPost implements threadAddPost operation.
	//
	// Add a new post to thread.
	//
	// POST /api/threads/{threadId}/posts
	ThreadAddPost(ctx context.Context, req *ThreadCreatePostRequest, params ThreadAddPostParams) (ThreadAddPostRes, error)
	// ThreadCreate implements threadCreate operation.
	//
	// Create a new thread.
	//
	// POST /api/threads
	ThreadCreate(ctx context.Context, req *ThreadCreateRequest) (ThreadCreateRes, error)
	// ThreadGet implements threadGet operation.
	//
	// Get single thread with all posts by thread id.
	//
	// GET /api/threads/{threadId}
	ThreadGet(ctx context.Context, params ThreadGetParams) (ThreadGetRes, error)
	// ThreadsList implements threadsList operation.
	//
	// Get list of threads with pagination. You can use either page-based pagination (page + limit)
	// or cursor-based pagination (after or before). The response includes an estimated total count
	// of threads for better performance.
	// Only one pagination method should be used at a time.
	// If both are provided, page-based pagination will be used.
	// `page` - will return that page
	// `before` - return older threads with lower id than provided (provided id will not be included in
	// response),
	// `after` - return newer threads with higher id than provided (provided id will not be included in
	// response).
	// If no pagination parameters are provided, the first page will be returned.
	// If no limit is provided, the default limit is used.
	//
	// GET /api/threads
	ThreadsList(ctx context.Context, params ThreadsListParams) (ThreadsListRes, error)
}

// UserHandler handles operations described by OpenAPI v3 specification.
//
// x-ogen-operation-group: User
type UserHandler interface {
	// UserCreate implements userCreate operation.
	//
	// Create a new user.
	//
	// POST /api/user
	UserCreate(ctx context.Context, req *UserCreateRequest) (UserCreateRes, error)
	// UserDelete implements userDelete operation.
	//
	// Delete a user.
	//
	// DELETE /api/user/{userId}
	UserDelete(ctx context.Context, params UserDeleteParams) error
	// UserGet implements userGet operation.
	//
	// Get user information.
	//
	// GET /api/user/{userId}
	UserGet(ctx context.Context, params UserGetParams) (UserGetRes, error)
	// UserMe implements userMe operation.
	//
	// Get current user information.
	//
	// GET /api/user/me
	UserMe(ctx context.Context) (UserMeRes, error)
	// UserUpdate implements userUpdate operation.
	//
	// Update user information.
	//
	// POST /api/user/{userId}
	UserUpdate(ctx context.Context, req *UserCreateRequest, params UserUpdateParams) (*UserCreateResponseOk, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
